# Comment Bot System Documentation

## Overview

AI ê¸°ë°˜ ê°€ì§œ ëŒ“ê¸€ ìƒì„± ì‹œìŠ¤í…œ. 30ê°œì˜ ë…ì í˜ë¥´ì†Œë‚˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¥ë¥´ë³„ë¡œ í˜„ì‹¤ì ì´ê³  ë‹¤ì–‘í•œ ëŒ“ê¸€ì„ ìƒì„±í•œë‹¤.

**í•µì‹¬ ì›ì¹™:**
- **í˜ë¥´ì†Œë‚˜ ê¸°ë°˜**: ê° ë…ìëŠ” ê³ ìœ í•œ ì„±ê²©, ë§íˆ¬, í–‰ë™ íŒ¨í„´ì„ ê°€ì§
- **ì¥ë¥´ ê°€ì¤‘ì¹˜**: DBì— ì €ì¥ëœ ì¥ë¥´ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í˜ë¥´ì†Œë‚˜ í’€ ë¹„ìœ¨ì„ ë™ì ìœ¼ë¡œ ì¡°ì •
- **4-Call ì¸ì§€ ë¶„ë¦¬**: ë…ì ìœ í˜•ë³„ë¡œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¶„ë¦¬í•˜ì—¬ GPT ì¶œë ¥ í’ˆì§ˆ í–¥ìƒ
- **ë‹¨ê³„ë³„ íŒŒì´í”„ë¼ì¸**: ì´ë²¤íŠ¸ ì¶”ì¶œ â†’ í˜ë¥´ì†Œë‚˜ ì„ íƒ â†’ ë·° ì œí•œ â†’ GPT í˜¸ì¶œ â†’ íë ˆì´ì…˜

---

## 1. í•µì‹¬ ë°ì´í„° êµ¬ì¡°

### 1.1 PERSONA_POOL (30ëª…)

5ê°œ ê·¸ë£¹ìœ¼ë¡œ ë¶„ë¥˜:

#### A. ì§„ì„±ë…ìí˜• (8ëª…)
- `A1` ì°íŒ¬: ì‘ì›/ê¸°ëŒ€ ì¤‘ì‹¬
- `A2` ì„¤ì •ë•í›„: ì„¸ê³„ê´€ ë¶„ì„
- `A3` ê°ìˆ˜ì„±: ê°ì • ë¬˜ì‚¬
- `A4` ì „íˆ¬ê´‘: ì•¡ì…˜ ì„ í˜¸
- `A5` ë³µì„ ëŸ¬: ë–¡ë°¥ ë¶„ì„
- `A6` ê³µí¬ì¢‹ì•„: í˜¸ëŸ¬ ë°˜ì‘
- `A7` ì—°ì• ë‡Œ: ë¡œë§¨ìŠ¤ ì§‘ì¤‘
- `A8` ì—­ë•: ì—­ì‚¬ ì •í™•ë„

#### B. ë¶„ì„ëŸ¬ (7ëª…)
- `B1` ë…¼ë¦¬íŒŒ: ì¸ê³¼ê´€ê³„ ë¶„ì„
- `B2` ì„¤ì •ë§¤ë‹ˆì•„: ì„¤ì •êµ¬ë© ì§€ì 
- `B3` ì¶”ë¦¬í˜•: ì¶”ë¡ /ì˜ˆì¸¡
- `B4` SFì‚¬ê³ : ê³¼í•™ì  ë¶„ì„
- `B5` ì—­ì‚¬ê³ ì¦: ì‹œëŒ€ê³ ì¦
- `B6` ìºë¦­í„°ë¶„ì„ê°€: ì„±ì¥ê¶¤ì 
- `B7` íšŒê·€í†µ: íšŒê·€ë¬¼ ì „ë¬¸

#### C. ê°ì •í˜• (5ëª…)
- `C1` ê°ì •í­ë°œëŸ¬: ëŒ€ë¬¸ì/ê³¼ì¥
- `C2` ì•¡ì…˜ì¤‘ë…: ì „íˆ¬ í¥ë¶„
- `C3` ìœ ë¨¸ëŸ¬: ì›ƒê¸´ ë°˜ì‘
- `C4` ë¡œë§¨í‹±: ë©œë¡œ ì§‘ì¤‘
- `C5` ê³µê°ì™•: ê¹Šì€ ê³µê°

#### D. íŠ¸ë¡¤/ëƒ‰ì†Œí˜• (5ëª…)
- `D1` ì¸ë‚´ì‹¬ì œë¡œ: ì „ê°œ ë¹„íŒ
- `D2` í´ë¦¬ì…°í—Œí„°: ë»”í•¨ ì§€ì 
- `D3` íŒŒì›Œë°¸ëŸ°ìŠ¤ì¶©: ë°¸ëŸ°ìŠ¤ ë¶•ê´´
- `D4` ì‘ê°€ë¹„íŒëŸ¬: êµ¬ì„±ë ¥ ë¹„íŒ
- `D5` ê³µí¬ë¹„ê¼¼ëŸ¬: í˜¸ëŸ¬ ë¹„í•©ë¦¬ì„±

#### E. ë°ˆ/ë“œë¦½í˜• (5ëª…)
- `E1` ê²Œì„ë“œë¦½ëŸ¬: ê²Œì„ ìš©ì–´
- `E2` ë°ˆì¥ì¸: ì¥ë¥´ ë¹„ìœ 
- `E3` ì—°ì• ë“œë¦½ëŸ¬: ì—°ì•  ë°ˆ
- `E4` ì—­ì‚¬ë“œë¦½ëŸ¬: ì—­ì‚¬â†’í˜„ëŒ€ ë¹„ìœ 
- `E5` ì˜¤ë…ëŸ¬: ì˜ëª» ì½ê³  í™•ì‹ 

**ì†ì„±:**
```typescript
{
    id: string;           // 'A1', 'B2' ë“±
    name: string;         // 'ì°íŒ¬', 'ì„¤ì •ë§¤ë‹ˆì•„' ë“±
    baseType: string;     // 'fan', 'analyzer', 'troll', 'lurker', 'misreader'
    callGroup: string;    // 'immersed', 'overreactor', 'chaos', 'casual'
    tone: string;         // ë§íˆ¬ ì„¤ëª…
    style: string;        // ì‘ì„± ìŠ¤íƒ€ì¼ íŒ¨í„´
    endings: string[];    // ì–´ë¯¸ ì˜ˆì‹œ (4ê°œ)
}
```

---

### 1.2 GENRE_PERSONA_MAP

ì¥ë¥´ë³„ í˜ë¥´ì†Œë‚˜ í’€ (12ê°œ ì¥ë¥´):

```typescript
{
    'fantasy': ['A1','A2','A4','A5','A7','B1','B2','B6','C1','C5','D1','D2','D3','E1','E2','E5'],
    'game-fantasy': ['A1','A4','A5','B1','B2','B6','C1','C2','C5','D1','D2','D3','E1','E2','E5'],
    'murim': ['A1','A4','A5','B1','B2','C1','C2','C5','D1','D3','E1','E2','E5'],
    'romance': ['A1','A3','A7','B1','B6','C1','C4','C5','D1','D2','D4','E2','E3','E5'],
    'scifi': ['A2','B1','B2','B4','B6','C1','C5','D1','D4','E2','E5'],
    'mystery': ['A1','B1','B3','B6','C5','D1','D4','E2','E5'],
    'horror': ['A1','A2','A6','C1','C5','D1','D5','E2','E5'],
    'historical': ['A2','A5','A8','B1','B5','B6','C5','D1','D4','E4','E5'],
    'slice-of-life': ['A1','A5','A7','C4','C5','D1','D4','E2','E5'],
    'action': ['A4','B1','C1','C2','C5','D1','D3','E1','E2','E5'],
    'comedy': ['A1','C1','C3','C5','D1','D4','E1','E2','E5'],
    'regression': ['A4','A5','B1','B7','C2','C5','D1','D2','D3','E1','E2','E5']
}
```

---

### 1.3 GENRE_CATEGORY_MAP

Admin í•˜ìœ„ì¥ë¥´ â†’ ìƒìœ„ ì¹´í…Œê³ ë¦¬ ë§¤í•‘ (57ê°œ):

**ë§¤í•‘ ì˜ˆì‹œ:**
```
High Fantasy â†’ fantasy
Dark Fantasy â†’ fantasy
GameLit / LitRPG â†’ game-fantasy
Cultivation â†’ game-fantasy
Murim â†’ murim
Contemporary Romance â†’ romance
CEO / Billionaire â†’ romance  (Tropeì´ì§€ë§Œ romanceë¡œ ë§¤í•‘)
Isekai â†’ regression
Regression â†’ regression
Space Opera â†’ scifi
...
```

**ì˜ë„ì  ë¯¸ë§¤í•‘ (10ê°œ):**
- Tropes: `Werewolf/Vampire`, `LGBTQ+`, `Cozy`, `Grimdark`, `Dark Academia`
- Audience: `YA`, `New Adult`, `Adult`
- Other: `Fanfiction`, `Paranormal`

---

### 1.4 GENRE_HINTS

ì¥ë¥´ë³„ Ã— ì–¸ì–´ë³„ ëŒ“ê¸€ ìŠ¤íƒ€ì¼ ê°€ì´ë“œ (12 genre Ã— 5 lang):

**êµ¬ì¡°:**
```typescript
GENRE_HINTS[genre][language]: string
```

**ì˜ˆì‹œ (fantasy Ã— ko):**
```
[ì¥ë¥´: íŒíƒ€ì§€ | í•œêµ­ì–´ ëŒ“ê¸€ ìŠ¤íƒ€ì¼]
- ì§§ì€ ë¬¸ì¥ (5-15ì)
- ì‰¼í‘œ ê±°ì˜ ì‚¬ìš© ì•ˆ í•¨
- "ë³µì„ ", "ì„¤ì •", "ì„¸ê³„ê´€", "ê°ì„±", "ì„œì‚¬" ìì£¼ ì‚¬ìš©
- ë¶„ì„ + ê°íƒ„ í˜¼í•©
- ê°ì • ë¹„ìœ¨: ê³„ì‚° 40%, ê°ì • 30%, ì‘ì› 15%, ë¬´ì˜ë¯¸(ã…‹ã…‹/ì¶œì²µ) 10%, ë¹„íŒ 5%

ì˜ˆì‹œ:
- ë³µì„  íšŒìˆ˜ ã…ã…Š
- ì„¤ì • ì´ê±° ë§ ë¨?
- ì„¸ê³„ê´€ ê°œì˜¤ë°”ë„¤
...
```

**ì—­í• :**
- **í˜ë¥´ì†Œë‚˜**: ë§íˆ¬/ìŠ¤íƒ€ì¼ (`~ì¸ë“¯`, ëŒ€ë¬¸ì, ì´ëª¨ì§€)
- **ì¥ë¥´ íŒíŠ¸**: ì–´íœ˜/ì£¼ì œ (`"ë³µì„ "`, `"ê°ì„±"` vs `"ì‹¬ì¿µ"`, `"ì¼€ë¯¸"`)

ë‘˜ ë‹¤ í•„ìš”. í˜ë¥´ì†Œë‚˜ë§Œ ì£¼ë©´ GPTê°€ "ë¬´ì—‡ì— ëŒ€í•´" ì“¸ì§€ ëª°ë¼ ë””í´íŠ¸(ë¡œë§¨ìŠ¤)ë¡œ ë¹ ì§.

---

## 2. ëŒ“ê¸€ ìƒì„± íŒŒì´í”„ë¼ì¸ (7ë‹¨ê³„)

### Stage 1: Event Extraction
```
ì—í”¼ì†Œë“œ ë³¸ë¬¸ â†’ GPT â†’ { events[], dominantEmotion }
```
- 5~7ê°œ í•µì‹¬ ì‚¬ê±´ ì¶”ì¶œ
- ì§€ë°° ê°ì • 1ê°œ (ê¸´ì¥/ìŠ¬í””/ë¶„ë…¸/ì›ƒê¹€/ì†Œë¦„/ì„¤ë ˜/í—ˆíƒˆ/ê°ë™)

### Stage 1.5: Genre-based Persona Selection
```
DB genre â†’ getGenreWeights() â†’ { fantasy: 0.5, romance: 0.5 }
genreWeights â†’ selectPersonasForGenre() â†’ [A1, A4, C1, ...] (8ëª…)
```
- **ê°€ì¤‘ì¹˜ ê³„ì‚°**: í•˜ìœ„ì¥ë¥´ ê°œìˆ˜ë¡œ ë¹„ìœ¨ ì‚°ì¶œ
  - ì˜ˆ: `[High Fantasy, Romantic Fantasy]` â†’ `{fantasy: 0.5, romance: 0.5}`
- **Largest Remainder Method**ë¡œ ìŠ¬ë¡¯ ë°°ë¶„
- `chaos` ìµœì†Œ 1ëª…, `casual` ìµœì†Œ 1ëª… ê°•ì œ

### Stage 2: Reader Profile Generation
```
events + personas + dominantEmotion â†’ generateReaderProfiles()
â†’ [{ personaId, type, attentionSpan, memoryNoise, emotionalIntensity, bandwagonTarget, ... }]
```
- ê° í˜ë¥´ì†Œë‚˜ì— í™•ë¥ ì  íŠ¹ì„± ë¶€ì—¬
- `bandwagonTarget`: í¸ì• /í˜ì˜¤ ëŒ€ìƒ (30% í™•ë¥ )

### Stage 3: Info Restriction (View Building)
```
profiles â†’ buildReaderView(events, profile)
â†’ "ì£¼ì¸ê³µì´ ê²€ì„ íœ˜ë‘ë¥´ì ì ì´ ì“°ëŸ¬ì¡Œë‹¤" (attentionSpan, memoryNoise ë°˜ì˜)
```
- ì£¼ì˜ë ¥Â·ê¸°ì–µë ¥ì— ë”°ë¼ ì´ë²¤íŠ¸ ì„ íƒ
- ê°ì • ê°•ë„ì— ë”°ë¼ í•„í„°ë§/ê³¼ì¥

### Stage 4: 4-Call Cognitive Separation
```
callGroupë³„ ë¶„ë¥˜:
- immersed (ëª°ì…í˜•) â†’ call1
- overreactor (ê°ì •í­ë°œ) â†’ call2
- chaos (ëƒ‰ì†Œ/ì˜¤ë…) â†’ call3
- casual (ë°ˆ/ë“œë¦½) â†’ call4

ê° callë§ˆë‹¤:
platform + moodHint + genreHint + í˜ë¥´ì†Œë‚˜ë³„ view/ë§íˆ¬/ì–´ë¯¸ â†’ GPT
â†’ { comments: [...] }
```

**í”„ë¡¬í”„íŠ¸ êµ¬ì¡° (call1 ì˜ˆì‹œ):**
```
í•œêµ­ ì›¹ì†Œì„¤ ëª¨ë°”ì¼ ì•±. ë°©ê¸ˆ ì½ê³  ë°”ë¡œ í°ìœ¼ë¡œ ì¹˜ëŠ” ëŒ“ê¸€.
ìƒê° ì •ë¦¬ ì•ˆ í•œë‹¤. ë¶„ì„í•˜ë ¤ë‹¤ ë§ì•„ë¼.
ë¶„ìœ„ê¸°: ì´ í™”ëŠ” ì „ì²´ì ìœ¼ë¡œ "ê¸´ì¥" ëŠë‚Œì´ ê°•í•˜ë‹¤.

[ì¥ë¥´: íŒíƒ€ì§€ | í•œêµ­ì–´ ëŒ“ê¸€ ìŠ¤íƒ€ì¼]
- ì§§ì€ ë¬¸ì¥ (5-15ì)
- "ë³µì„ ", "ì„¤ì •", "ì„¸ê³„ê´€", "ê°ì„±" ìì£¼ ì‚¬ìš©
...

[A: ì„¤ì •ë•í›„]
ê¸°ì–µ: ì£¼ì¸ê³µì´ ë§ˆë‚˜ë¥¼ ê°ì„±í–ˆë‹¤
ë§íˆ¬: ë¶„ì„ì , ~ì¸ë“¯/~ë„¤ë¡œ ëŠìŒ
í–‰ë™: ì„¤ì • íŒŒê³ ë“¤ê¸°. ì§ˆë¬¸í˜• ë§ìŒ
ì–´ë¯¸: ~ì¸ë“¯, ~ë„¤, ~êµ¬ë‚˜, ì ê¹

[B: ì°íŒ¬]
ê¸°ì–µ: ì£¼ì¸ê³µì´ ê°•í•´ì¡Œë‹¤
ë§íˆ¬: ì‘ì› ì¤‘ì‹¬, ì§§ì€ ë¬¸ì¥
í–‰ë™: ê¸°ëŒ€/ì‘ì›. ë‹¤ìŒí™” ê°ˆë§
ì–´ë¯¸: ã… ã… , ã…ã…Š, ê°€ì¦ˆì•„, ì œë°œ

[ì¶œë ¥ â€” JSON]
{ "tags": ["battle/romance/.../reunion ì¤‘ í•´ë‹¹"], "comments": ["8ê°œ"] }
```

### Stage 5: Herd Effect (safe commentsë§Œ)
- 20% ëŒ“ê¸€ì— "ë‚˜ë„", "ã„¹ã…‡", "ì™€ ì§„ì§œ" ì¶”ê°€

### Stage 6: Emotion Amplification
- 15% ëŒ“ê¸€ ëŒ€ë¬¸ì ë³€í™˜
- 12% ã…‹ã…‹/ã… ã…  ì¶”ê°€

### Stage 7: GPT-5 Curator (safe commentsë§Œ)
- ìµœì¢… í’ˆì§ˆ í•„í„°ë§
- chaos commentsëŠ” ë³´í˜¸ (1~2ê°œë§Œ ëœë¤ ì‚½ì…)

---

## 3. í•µì‹¬ í•¨ìˆ˜

### 3.1 `getGenreWeights(genreData: string | string[])`
```typescript
// Input: "High Fantasy,Romantic Fantasy"
// Output: { fantasy: 0.5, romance: 0.5 }

í•˜ìœ„ì¥ë¥´ â†’ GENRE_CATEGORY_MAP â†’ ìƒìœ„ ì¹´í…Œê³ ë¦¬
ì¹´í…Œê³ ë¦¬ë³„ ê°œìˆ˜ ì¹´ìš´íŠ¸ â†’ ë¹„ìœ¨ ê³„ì‚°
```

### 3.2 `selectPersonasForGenre(genreWeights, count)`
```typescript
// Input: { fantasy: 0.5, romance: 0.5 }, count=8
// Output: [A1, A2, C1, ...] (fantasy 4ìŠ¬ë¡¯, romance 4ìŠ¬ë¡¯)

Largest Remainder Methodë¡œ ìŠ¬ë¡¯ ë°°ë¶„
ê° ì¹´í…Œê³ ë¦¬ í’€ì—ì„œ ëœë¤ ì„ íƒ
chaos>=1, casual>=1 ê°•ì œ
```

### 3.3 `generateDeepContextComments(episodeContent, genreWeights, count, sourceLanguage)`
7ë‹¨ê³„ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰.

### 3.4 `parseComments(raw: string)`
```typescript
// GPT ì‘ë‹µ íŒŒì‹± + ë¼ë²¨ ì œê±°
.replace(/^(ë°˜ì‘|ì›ëŒ“ê¸€|ë…ì[A-Z]?|ê°ìƒ|ëŒ“ê¸€|ì½”ë©˜íŠ¸)[ï¼š:]\s*/g, '')
// JSON ì„±ê³µ/ì‹¤íŒ¨ ì–‘ìª½ ê²½ë¡œ ëª¨ë‘ ì ìš©
```

---

## 4. ë””ë²„ê¹… ê°€ì´ë“œ

### 4.1 ë¡œê·¸ í™•ì¸

**ì •ìƒ í”Œë¡œìš° ë¡œê·¸:**
```
POST /api/dev/run-comment-bot
ğŸ“Š Genre weights: fantasy=100%
ğŸ“– Genre hint applied: fantasy (ko)
ğŸ“‹ Stage 1: Extracting events...
ğŸ‘¥ Stage 2: Generating reader profiles...
  A1(fan): attention=0.85, noise=0.12, emotion=0.78
  B2(analyzer): attention=0.92, noise=0.05, emotion=0.34
ğŸ”’ Stage 3: Building reader views...
ğŸ§  Stage 4: Persona-based cognitive calls...
ğŸ“Š Call groups: immersed=3, overreactor=2, chaos=2, casual=1
ğŸ“Š Raw: safe=24, chaos=6
ğŸ‘¥ Stage 5: Herd effect...
ğŸ”¥ Stage 6: Emotion amplification...
ğŸ“Š After social dynamics: 24 â†’ 28
ğŸ¨ Stage 7: GPT-5 Curator...
```

### 4.2 ë¬¸ì œ íŒ¨í„´

#### âŒ "ë¡œë§¨ìŠ¤ ëŒ“ê¸€ë§Œ ë‚˜ì˜¨ë‹¤"
**ì›ì¸ 1**: `genreWeights = {}`
- DBì— ì¥ë¥´ ì €ì¥ ì•ˆ ë¨
- Adminì—ì„œ "Save Settings" í´ë¦­ â†’ ì¥ë¥´ ì¬ì €ì¥

**ì›ì¸ 2**: `ğŸ“– Genre hint applied` ë¡œê·¸ ì—†ìŒ
- ìµœì‹  ì½”ë“œ ë°°í¬ ì•ˆ ë¨
- `git push` í™•ì¸

**ì›ì¸ 3**: `GENRE_CATEGORY_MAP`ì— ì¥ë¥´ ì´ë¦„ ì—†ìŒ
- Admin í•˜ìœ„ì¥ë¥´ ì´ë¦„ê³¼ MAP í‚¤ ì¼ì¹˜ í™•ì¸
- ì˜ˆ: `"High Fantasy"` â†’ `GENRE_CATEGORY_MAP["High Fantasy"]` ìˆì–´ì•¼ í•¨

#### âŒ "ëŒ“ê¸€ì— 'ë°˜ì‘:' ë¼ë²¨ í¬í•¨"
**ì›ì¸**: `parseComments` fallback ê²½ë¡œ ë¯¸ì‘ë™
- JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ë¼ë²¨ ì œê±° ì•ˆ ë¨
- ìµœì‹  ì½”ë“œ ë°°í¬ í™•ì¸ (stripLabel ì–‘ìª½ ê²½ë¡œ ì ìš©)

#### âŒ "ã… ã… ê°€ ë„ˆë¬´ ë§ë‹¤"
**ì›ì¸**: ì¥ë¥´ íŒíŠ¸ ë¯¸ì ìš©
- ë¡œê·¸ì—ì„œ `ğŸ“– Genre hint applied` í™•ì¸
- ì¥ë¥´ íŒíŠ¸ê°€ ì—†ìœ¼ë©´ GPTê°€ ë²”ìš© í•œêµ­ ì›¹ì†Œì„¤ = ê°ì • ìœ„ì£¼ = ã… ã… 

---

## 5. ìµœê·¼ ìˆ˜ì • ì´ë ¥ (2026-02-15)

### 5.1 ì¥ë¥´ ë§¤í•‘ ê°­ ìˆ˜ì •
- `GENRE_CATEGORY_MAP` â€” Admin ì¥ë¥´ 57ê°œ ì „ë¶€ ë™ê¸°í™”
- `High Fantasy`, `Dark Fantasy`, `Urban Fantasy` â†’ `fantasy` ì¶”ê°€
- `Supernatural Horror`, `Cosmic Horror`, `Gothic` â†’ `horror` ì¶”ê°€
- `sci-fi` â†’ `scifi` í‚¤ í†µì¼

### 5.2 ì¥ë¥´ íŒíŠ¸ ì£¼ì…
- `GENRE_HINTS` ì •ì˜ë§Œ ìˆê³  ì‹¤ì œ í”„ë¡¬í”„íŠ¸ì— ì•ˆ ë“¤ì–´ê°”ìŒ â† **í•µì‹¬ ë²„ê·¸**
- `generateDeepContextComments`ì— `sourceLanguage` íŒŒë¼ë¯¸í„° ì¶”ê°€
- `call1/2/3/4` ëª¨ë‘ì— `${genreHint}` ì£¼ì…

### 5.3 ë¼ë²¨ ë¦­ ë°©ì§€
- `parseComments`ì˜ fallback ê²½ë¡œì—ë„ ë¼ë²¨ ì œê±° ë¡œì§ ì¶”ê°€
- `ë°˜ì‘`, `ê°ìƒ`, `ëŒ“ê¸€`, `ì½”ë©˜íŠ¸`, `ì˜ê²¬`, `ë‹µê¸€` + ì „ê° ì½œë¡  í¬í•¨

### 5.4 í˜ë¥´ì†Œë‚˜ í’€ ì¶”ê°€
- `GENRE_PERSONA_MAP`ì— `game-fantasy`, `murim` ì¶”ê°€

---

## 6. API ì‚¬ìš©ë²•

### 6.1 ì—”ë“œí¬ì¸íŠ¸
```
POST /api/dev/run-comment-bot
```

### 6.2 ìš”ì²­ ì˜ˆì‹œ
```json
{
  "novelId": "novel-1770910615867",
  "episodeId": "ep-123",
  "totalCount": 60,
  "deep": true,
  "sceneCommentRatio": 40
}
```

### 6.3 ì‘ë‹µ
```json
{
  "ok": true,
  "inserted": 60,
  "cached": 0,
  "deepCount": 24,
  "templateCount": 36
}
```

---

## 7. ì•Œë ¤ì§„ ì œì•½

### 7.1 ì¤‘ë³µ ëŒ“ê¸€
- 6íšŒ ë°°ì¹˜ í˜¸ì¶œ ì‹œ ë™ì¼ í˜ë¥´ì†Œë‚˜ ì¬ì‚¬ìš© â†’ ìœ ì‚¬ ëŒ“ê¸€ ë°œìƒ ê°€ëŠ¥
- **í•´ê²° ë°©ì•ˆ (ë¯¸êµ¬í˜„)**: ì´ì „ ìƒì„± ëŒ“ê¸€ì„ GPTì—ê²Œ ë³´ì—¬ì£¼ê¸°

### 7.2 GPT í•™ìŠµ í¸í–¥
- "í•œêµ­ ì›¹ì†Œì„¤"ë§Œ ë³´ë©´ GPTê°€ ë¡œë§¨ìŠ¤Â·ê°ì • ìœ„ì£¼ë¡œ ì¶”ë¡ 
- **í•´ê²°**: ì¥ë¥´ íŒíŠ¸ í•„ìˆ˜ ì£¼ì…

### 7.3 ì¥ë¥´ íƒœê·¸ í’ˆì§ˆ
- DBì— ì¥ë¥´ ì—†ìœ¼ë©´ default pool â†’ ë²”ìš© ëŒ“ê¸€
- Adminì—ì„œ ì¥ë¥´ í•„ìˆ˜ ì €ì¥ í•„ìš”

---

## 8. í–¥í›„ ê°œì„  ë°©í–¥

1. **ì¤‘ë³µ ë°©ì§€**: ìƒì„±ëœ ëŒ“ê¸€ íˆìŠ¤í† ë¦¬ë¥¼ í”„ë¡¬í”„íŠ¸ì— í¬í•¨
2. **ì–¸ì–´ë³„ í˜ë¥´ì†Œë‚˜**: ì¤‘êµ­ì–´Â·ì¼ë³¸ì–´ ë…ì íŠ¹ì„± ë°˜ì˜
3. **ì‹¤ì‹œê°„ íŠ¸ë Œë“œ**: ìµœì‹  ë°ˆÂ·ë“œë¦½ ì£¼ê¸°ì  ì—…ë°ì´íŠ¸
4. **A/B í…ŒìŠ¤íŒ…**: ì¥ë¥´ íŒíŠ¸ on/off ë¹„êµ ì‹¤í—˜
5. **ê°ì • ë‹¤ì–‘ì„±**: ã… ã…  ì‚¬ìš© í™•ë¥  ë™ì  ì¡°ì •

---

## 9. ì°¸ê³  ìë£Œ

- **ì½”ë“œ ìœ„ì¹˜**: `narra-storage/app/api/dev/run-comment-bot/route.ts`
- **Admin ì¥ë¥´ ì •ì˜**: `ì—…ë¡œë“œìš© ì›¹ì‚¬ì´íŠ¸/app/novel/[id]/page.tsx` (GENRE_CATEGORIES)
- **DB ìŠ¤í‚¤ë§ˆ**: `novels.genre`, `novels.genre_taxonomy`
